[2025-07-14 15:32:23] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:32:23] [INFO] PHP Version: 8.2.12
[2025-07-14 15:32:23] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:32:23] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:32:23] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:32:24] [ERROR] ‚ùå Function 'generatePaymentReference' not found
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:32:24] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:32:24] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:32:46] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:32:46] [INFO] PHP Version: 8.2.12
[2025-07-14 15:32:46] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:32:46] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:32:46] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:32:46] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "BIZ000001",
    "test_account_search": ""
}
[2025-07-14 13:32:46] [INFO] Testing account search for: BIZ000001 (Business)
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Business account found: KabTech Consulting
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Bill found for business: BILL2025B000006
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:32:46] [ERROR] ‚ùå Function 'generatePaymentReference' not found
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:32:46] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:32:46] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:34:00] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:34:00] [INFO] PHP Version: 8.2.12
[2025-07-14 15:34:00] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:34:00] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:34:00] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:34:00] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "200",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:34:00] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:34:00] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 200,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:34:00] [INFO] Generated payment reference: PAY20250714133400598
[2025-07-14 13:34:00] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:34:00] [ERROR] ‚ùå Function 'generatePaymentReference' not found
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:34:00] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:34:00] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:37:50] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:37:50] [INFO] PHP Version: 8.2.12
[2025-07-14 15:37:50] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:37:50] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:37:50] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:37:50] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "200",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:37:50] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:37:50] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 200,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:37:50] [INFO] Generated payment reference: PAY20250714133750242
[2025-07-14 13:37:50] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:37:50] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:37:50] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:39:08] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:39:08] [INFO] PHP Version: 8.2.12
[2025-07-14 15:39:08] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:39:08] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:39:08] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:39:09] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:39:09] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "200",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:39:09] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:39:09] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 200,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:39:09] [INFO] Generated payment reference: PAY20250714133909149
[2025-07-14 13:39:09] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:39:09] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:39:09] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:39:16] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:39:16] [INFO] PHP Version: 8.2.12
[2025-07-14 15:39:16] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:39:16] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:39:16] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:39:16] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "BIZ000001",
    "test_account_search": ""
}
[2025-07-14 13:39:16] [INFO] Testing account search for: BIZ000001 (Business)
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Business account found: KabTech Consulting
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Bill found for business: BILL2025B000006
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:39:16] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:39:16] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:39:43] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:39:43] [INFO] PHP Version: 8.2.12
[2025-07-14 15:39:43] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:39:43] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:39:43] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:39:43] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "10",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:39:43] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:39:43] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 10,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:39:43] [INFO] Generated payment reference: PAY20250714133943202
[2025-07-14 13:39:43] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:39:43] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:39:43] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:48:49] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:48:49] [INFO] PHP Version: 8.2.12
[2025-07-14 15:48:49] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:48:49] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:48:49] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:48:49] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "10",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:48:49] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:48:49] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 10,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:48:49] [INFO] Generated payment reference: PAY20250714134849128
[2025-07-14 13:48:49] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:48:49] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:48:49] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:54:24] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:54:24] [INFO] PHP Version: 8.2.12
[2025-07-14 15:54:24] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:54:24] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:54:24] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:54:24] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "10",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:54:24] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:54:24] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 10,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:54:24] [INFO] Generated payment reference: PAY20250714135424252
[2025-07-14 13:54:24] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:54:24] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:54:24] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:54:35] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:54:35] [INFO] PHP Version: 8.2.12
[2025-07-14 15:54:35] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:54:35] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:54:35] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:54:35] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "00010001",
    "test_account_search": ""
}
[2025-07-14 13:54:35] [INFO] Testing account search for: 00010001 (Business)
[2025-07-14 13:54:35] [ERROR] ‚ùå Business account not found
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:54:35] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:54:35] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:54:49] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:54:49] [INFO] PHP Version: 8.2.12
[2025-07-14 15:54:49] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:54:49] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:54:49] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:54:49] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "BIZ000001",
    "test_account_search": ""
}
[2025-07-14 13:54:49] [INFO] Testing account search for: BIZ000001 (Business)
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Business account found: KabTech Consulting
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Bill found for business: BILL2025B000006
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:54:49] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:54:49] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:55:08] [INFO] === PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:55:08] [INFO] PHP Version: 8.2.12
[2025-07-14 15:55:08] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:55:08] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Table 'businesses' exists with 22 columns
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Table 'properties' exists with 24 columns
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Table 'bills' exists with 15 columns
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Table 'payments' exists with 13 columns
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Table 'users' exists with 13 columns
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Found 3 bills
[2025-07-14 13:55:08] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:55:08] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "10",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:55:08] [INFO] === TESTING PAYMENT PROCESSING ===
[2025-07-14 13:55:08] [INFO] Payment data: {
    "bill_id": 2025000006,
    "amount_paid": 10,
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": ""
}
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Transaction started
[2025-07-14 13:55:08] [INFO] Generated payment reference: PAY20250714135508784
[2025-07-14 13:55:08] [ERROR] ‚ùå Failed to insert payment record
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:55:08] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:55:08] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:57:52] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:57:52] [INFO] PHP Version: 8.2.12
[2025-07-14 15:57:52] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:57:52] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:57:52] [INFO]   ‚Ü≥ Test call returned: PAY20250714N1HJI8
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-14 13:57:52] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:57:52] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:57:52] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:57:52] [INFO] POST Data: {
    "bill_id": "2025000006",
    "amount_paid": "10",
    "payment_method": "Cash",
    "payment_channel": "",
    "transaction_id": "",
    "notes": "",
    "test_payment_processing": ""
}
[2025-07-14 13:57:52] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:58:06] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:58:06] [INFO] PHP Version: 8.2.12
[2025-07-14 15:58:06] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:58:06] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:58:06] [INFO]   ‚Ü≥ Test call returned: PAY20250714SMNZ0O
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-14 13:58:06] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:58:06] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:58:06] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "BIZ000001",
    "test_account_search": ""
}
[2025-07-14 13:58:06] [INFO] Testing account search for: BIZ000001 (Business)
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Business account found: KabTech Consulting
[2025-07-14 13:58:06] [SUCCESS] ‚úÖ Bill found for business: BILL2025B000006
[2025-07-14 13:58:06] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-14 15:58:33] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-14 15:58:33] [INFO] PHP Version: 8.2.12
[2025-07-14 15:58:33] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-14 13:58:33] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database connection established
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-14 13:58:33] [INFO]   ‚Ü≥ Test call returned: PAY20250714ZBLOCX
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-14 13:58:33] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-14 13:58:33] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-14 13:58:33] [INFO] POST Data: {
    "flow_account_type": "Business",
    "flow_account_number": "BIZ000001",
    "flow_amount": "10",
    "flow_payment_method": "Cash",
    "test_complete_payment_flow": ""
}
[2025-07-14 13:58:33] [INFO] === TESTING COMPLETE PAYMENT FLOW ===
[2025-07-14 13:58:33] [INFO] Step 1: Finding account...
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Account found
[2025-07-14 13:58:33] [INFO] Step 2: Finding bill...
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Bill found: BILL2025B000006
[2025-07-14 13:58:33] [INFO] Step 3: Testing payment processing...
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Amount validation passed
[2025-07-14 13:58:33] [INFO] Calling processPayment function...
[2025-07-14 13:58:33] [SUCCESS] ‚úÖ Payment processing test successful!
[2025-07-14 13:58:33] [SUCCESS] Payment Reference: PAY202507148F20TP
[2025-07-14 13:58:33] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-15 14:48:56] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-15 14:48:56] [INFO] PHP Version: 8.2.12
[2025-07-15 14:48:56] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-15 12:48:56] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database connection established
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-15 12:48:56] [INFO]   ‚Ü≥ Test call returned: PAY20250715A49K27
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-15 12:48:56] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-15 12:48:56] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-15 12:48:56] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-15 14:49:14] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-15 14:49:14] [INFO] PHP Version: 8.2.12
[2025-07-15 14:49:14] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-15 12:49:14] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database connection established
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-15 12:49:14] [INFO]   ‚Ü≥ Test call returned: PAY202507155CRP2T
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-15 12:49:14] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-15 12:49:14] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-15 12:49:14] [INFO] POST Data: {
    "account_type": "Business",
    "account_number": "BIZ000001",
    "test_account_search": ""
}
[2025-07-15 12:49:14] [INFO] Testing account search for: BIZ000001 (Business)
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Business account found: KabTech Consulting
[2025-07-15 12:49:14] [SUCCESS] ‚úÖ Bill found for business: BILL2025B000006
[2025-07-15 12:49:14] [INFO] === DEBUG SESSION COMPLETED ===
[2025-07-15 14:49:47] [INFO] === ENHANCED PAYMENT PROCESSING DEBUG SESSION STARTED ===
[2025-07-15 14:49:47] [INFO] PHP Version: 8.2.12
[2025-07-15 14:49:47] [INFO] Server: Apache/2.4.58 (Win64) OpenSSL/3.1.3 PHP/8.2.12
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Successfully loaded: ../../config/config.php
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Successfully loaded: ../../config/database.php
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/functions.php
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/auth.php
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Successfully loaded: ../../includes/security.php
[2025-07-15 12:49:47] [SUCCESS] üéâ All required files loaded successfully!
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database connection established
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database query test successful. Found 6 users
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'execute' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'fetchRow' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'fetchAll' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'beginTransaction' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'commit' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'rollback' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Database method 'lastInsertId' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'generatePaymentReference' exists
[2025-07-15 12:49:47] [INFO]   ‚Ü≥ Test call returned: PAY20250715QLPN73
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'generateBillNumber' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'validatePaymentAmount' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'processPayment' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'getPaymentMethods' exists
[2025-07-15 12:49:47] [INFO]   ‚Ü≥ Found 4 payment methods
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'sanitizeInput' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'writeLog' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'getCurrentUser' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Function 'hasPermission' exists
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Found 1 businesses
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Found 1 properties
[2025-07-15 12:49:47] [INFO] === FORM SUBMISSION DETECTED ===
[2025-07-15 12:49:47] [INFO] POST Data: {
    "flow_account_type": "Business",
    "flow_account_number": "BIZ000001",
    "flow_amount": "20",
    "flow_payment_method": "Cash",
    "test_complete_payment_flow": ""
}
[2025-07-15 12:49:47] [INFO] === TESTING COMPLETE PAYMENT FLOW ===
[2025-07-15 12:49:47] [INFO] Step 1: Finding account...
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Account found
[2025-07-15 12:49:47] [INFO] Step 2: Finding bill...
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Bill found: BILL2025B000006
[2025-07-15 12:49:47] [INFO] Step 3: Testing payment processing...
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Amount validation passed
[2025-07-15 12:49:47] [INFO] Calling processPayment function...
[2025-07-15 12:49:47] [SUCCESS] ‚úÖ Payment processing test successful!
[2025-07-15 12:49:47] [SUCCESS] Payment Reference: PAY20250715XSTAOR
[2025-07-15 12:49:47] [INFO] === DEBUG SESSION COMPLETED ===
